<% if current_user.is_admin %>
<% if flash[:notice].present? %>
  <div class="row">
    <div class="col-6 offset-3">
      <div class="div alert alert-success">
        <span>
          <%= flash[:notice] %>
        </span>
      </div>
    </div>
  </div>
<% elsif flash[:alert].present? %>
  <div class="row">
    <div class="col-6 offset-3">
      <div class="div alert alert-danger">
        <span>
          <%= flash[:alert] %>
        </span>
      </div>
    </div>
  </div>
<% end %>
<div class="row">
  <div class="col-6">
    <h1>User Profile</h1>
    <table class="table table-bordered table-hover">
      <thead class="thead-dark">
      <tr>
        <th>Name</th>
        <td>
          <%= @user.username %>
        </td>
      </tr>
      <tr>
        <th>Email</th>
        <td>
          <%= @user.email %>
        </td>
      </tr>
      <tr>
        <th>Channels</th>
        <td>
          <%= @channels.present? ? @channels.map(&:name).join(", ") : "Not subscribed to any channel. "  %>
        </td>
      </tr>
      </thead>
    </table>
  </div>
  <div class="col-3 offset-1 border">
    <br/>
    <br/>
    <br/>
    <h3 class="text-center">Add to Room</h3>
    <%= form_for(:user, url: add_to_channel_path) do |f| %>
      <div class="form-group">
        <%= f.label 'Select Room' %>
        <%= f.select :channel_ids, options_for_select(Channel.all.map{|c| [c.name,c.id]}),{include_blank: 'Select Room'}, {class: 'form-control'} %>
        <%= f.hidden_field :user_id, value: @user.id %>
      </div>
      <div class="form-group float-right">
        <%= f.submit "Add to Room", class: 'btn btn-dark' %>
      </div>
    <% end %>
  </div>
</div>
<% else %>
<div class="alert alert-dark-danger alert-dismissible fade show">
  <button type="button" class="close" data-dismiss="alert">×</button>
  Sie haben versucht auf einen geschützen Bereich zuzugreifen. Ein Admin wurde darüber informiert.
</div>
<% end %>
